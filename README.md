# React + TypeScript + shadcn/ui Authentication App

Тестовое задание: React + TypeScript приложение с экраном авторизации, двухфакторной аутентификацией, обработкой различных сценариев ошибок API с использованием React Query и моков. UI — shadcn/ui + Tailwind CSS.

## Содержание

- [React + TypeScript + shadcn/ui Authentication App](#react--typescript--shadcnui-authentication-app)
  - [Содержание](#содержание)
  - [Стек и решения](#стек-и-решения)
  - [Структура проекта](#структура-проекта)
  - [Функциональность](#функциональность)
    - [Аутентификация](#аутентификация)
    - [Обработка состояний](#обработка-состояний)
  - [Экраны и компоненты](#экраны-и-компоненты)
    - [LoginForm](#loginform)
    - [VerificationForm](#verificationform)
  - [Обработка ошибок API](#обработка-ошибок-api)
    - [Сценарии ошибок логина:](#сценарии-ошибок-логина)
    - [Сценарии ошибок OTP:](#сценарии-ошибок-otp)
  - [Запуск локально](#запуск-локально)

## Стек и решения

- **React 18** + TypeScript + Vite
- **TanStack React Query** для управления состоянием API и моков
- **React Hook Form** + Zod для валидации форм
- **shadcn/ui** компоненты (Form, Input, Button, InputOTP)
- **Tailwind CSS** для стилизации
- **Lucide React** для иконок

## Структура проекта

```
src/
├── components/
│ ├── forms/
│ │ ├── LoginForm.tsx # Форма логина/пароля
│ │ └── VerificationForm.tsx # Форма двухфакторной аутентификации
│ ├── pages/
│ │ └── LoginPage.tsx # Страница авторизации
│ └── ui/ # shadcn/ui компоненты
├── lib/
│ ├── mocks.ts # Моки API и типы
│ └── utils.ts # Вспомогательные функции
└── App.tsx # Корневой компонент
```

## Функциональность

### Аутентификация

- **Экран логина** с полями username/password
- **Валидация форм** на клиенте с отображением ошибок
- **Двухфакторная аутентификация** с 6-значным кодом
- **Автоматическая отправка** при вводе 6 цифр

### Обработка состояний

- **Загрузка** во время API запросов
- **Успешная авторизация** с переходом к 2FA
- **Таймер истечения** кода (5 секунд)
- **Получение нового кода** при истечении времени

## Экраны и компоненты

### LoginForm

- Валидация: username (3-20 символов), password (минимум 8 символов)
- Индикация валидности формы
- Обработка ошибок API в реальном времени

### VerificationForm

- 6-значный OTP ввод с автоматической отправкой
- Таймер истечения срока действия кода (5 сек для наглядности)
- Кнопка "Получить новый код" при ошибках/истечении времени
- Навигация назад к форме логина

## Обработка ошибок API

### Сценарии ошибок логина:

- `username: 'server_error'` → "Сервер недоступен. Попробуйте позже."
- `username: 'wrong_data'` → "Неверное имя пользователя или пароль."
- `username: 'ban'` → "Пользователь заблокирован."
- `username: 'requests'` → "Слишком много запросов, подождите."

### Сценарии ошибок OTP:

- `otp: '131311'` → Успех (token: 'mock_token_123456')
- `otp: '111111'` → "Время действия кода истекло."
- `otp: '222222'` → "Сервер недоступен. Попробуйте позже."
- Любой другой код → "Неверный код. Попробуйте ещё раз."

## Запуск локально

```bash
# Установка зависимостей
npm install

# Запуск в dev-режиме
npm run dev

# Сборка для production
npm run build

# Превью production сборки
npm run preview
```
